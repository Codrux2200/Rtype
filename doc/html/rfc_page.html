<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
    <head>
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=11" />
        <meta name="generator" content="Doxygen 1.9.8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>R-Type: RFC</title>
        <link href="tabs.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="dynsections.js"></script>
        <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
        <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
        <script type="text/javascript">
            DoxygenAwesomeDarkModeToggle.init();
            DoxygenAwesomeInteractiveToc.init();
        </script>
        <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
 <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <div id="top">
            <!-- do not remove this div, it is closed by doxygen! -->
            <div id="titlearea">
                <table cellspacing="0" cellpadding="0">
                    <tbody>
                        <tr style="height: 56px">
                            <td id="projectlogo">
                                <img alt="Logo" src="icon.webp" />
                            </td>
                            <td id="projectalign" style="padding-left: 0.5em">
                                <div id="projectname">
                                    R-Type
                                    &#160;<span
                                        id="projectnumber"
                                        >1.0.0</span
                                    >
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
    </body>
</html>
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('rfc_page.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">RFC</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><ul><ul><ul><li class="level4"><a href="#autotoc_md1">Welcome to our R-Type&#39;s Request For Comments (RFC) page.</a></li>
<li class="level4"><a href="#autotoc_md2">This page contains all the information you need to know about the communication between the client and the server.</a></li>
</ul>
</ul>
</ul>
<li class="level1"><a href="#packet_sec">Packet architecture</a></li>
<li class="level1"><a href="#packet_types_sec">Packet types</a><ul><li class="level2"><a href="#server_rfc_sec">Server packets</a><ul><li class="level3"><a href="#server_connect_sec">CONNECT</a></li>
<li class="level3"><a href="#server_disconnect_sec">DISCONNECT</a></li>
<li class="level3"><a href="#server_start_sec">START</a></li>
<li class="level3"><a href="#client_dead_sec">DEAD</a></li>
<li class="level3"><a href="#server_join_sec">JOIN</a></li>
<li class="level3"><a href="#server_move_sec">MOVE</a></li>
<li class="level3"><a href="#server_sht_sec">SHOOT</a></li>
<li class="level3"><a href="#server_hit_sec">HIT</a></li>
<li class="level3"><a href="#server_score_sec">SCORE</a></li>
<li class="level3"><a href="#server_espwn_sec">ENEMY_SPAWN</a></li>
<li class="level3"><a href="#server_eded_sec">ENEMY_DEAD</a></li>
<li class="level3"><a href="#server_emve_sec">ENEMY_MOVE</a></li>
<li class="level3"><a href="#server_elife_sec">ENEMY_LIFE</a></li>
<li class="level3"><a href="#server_map_sec">MAP</a></li>
<li class="level3"><a href="#server_end_sec">END</a></li>
<li class="level3"><a href="#server_leader_sec">LEADER</a></li>
</ul>
</li>
<li class="level2"><a href="#client_rfc_sec">Client packets</a><ul><li class="level3"><a href="#client_connect_sec">CONNECT</a></li>
<li class="level3"><a href="#client_start_sec">START</a></li>
<li class="level3"><a href="#client_move_sec">MOVE</a></li>
<li class="level3"><a href="#client_sht_sec">SHOOT</a></li>
<li class="level3"><a href="#client_quit_sec">QUIT</a></li>
</ul>
</li>
<li class="level2"><a href="#diag_ex">Example of a connexion between a client and a server</a><ul><li class="level3"><a href="#autotoc_md3">Explanations:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h4><a class="anchor" id="autotoc_md1"></a>
Welcome to our R-Type's Request For Comments (RFC) page.</h4>
<h4><a class="anchor" id="autotoc_md2"></a>
This page contains all the information you need to know about the communication between the client and the server.</h4>
<h1><a class="anchor" id="packet_sec"></a>
Packet architecture</h1>
<p>The Packet serves as the primary unit of communication between the client and the server. It encompasses the following members:</p>
<ul>
<li><b>type:</b> Specifies the type of the packet. It is of type PacketType.</li>
<li><b>data</b> [Optional]: A union of all the possible data types that can be sent. It can be of type ConnectData, DisconnectData, StartData, JoinData, LeaderData, MoveData.</li>
</ul>
<p>The data union can be of the following types:</p>
<ul>
<li><b>connectData:</b> Contains data pertinent to connection operations. It is of type ConnectData.</li>
<li><b>disconnectData:</b> Holds data related to disconnection procedures. It is of type ConnectData.</li>
<li><b>startData:</b> Stores data regarding the commencement of a game. Type: StartData.</li>
<li><b>joinData:</b> Contains data about joining a session. Type: JoinData.</li>
<li><b>leaderData:</b> Indicates the leader within a session or game context. Type: LeaderData.</li>
<li><b>moveData:</b> Relates to movement operations. Type: MoveData.</li>
</ul>
<p>Each are precised in the following sections.</p>
<h1><a class="anchor" id="packet_types_sec"></a>
Packet types</h1>
<p><a class="el" href="rfc_page.html#diag_ex">Example of a connexion between a client and a server</a></p>
<h2><a class="anchor" id="server_rfc_sec"></a>
Server packets</h2>
<h3><a class="anchor" id="server_connect_sec"></a>
CONNECT</h3>
<p>A client sends a CONNECT packet to the server it wants to connect to.</p>
<p>The server sends a CONNECT packet to all the clients when a new client is connected. If the server can't accept a new connection, the server will send back a CONNECT packet with the status set to KO to the client, with an appropriate message.</p>
<p>The CONNECT packet contains an array of MAX_PLAYERS (currently 4) size, containing char (1 byte) arrays of NAME_LENGTH (currently 7), which contains the names of the players connected.</p>
<p><a class="el" href="structNetwork_1_1data_1_1ConnectData.html">Network::data::ConnectData</a></p>
<h3><a class="anchor" id="server_disconnect_sec"></a>
DISCONNECT</h3>
<p>The server sends a DISCONNECT packet to all the clients when a client wants to quit.</p>
<p>A DISCONNECT packet contains only 1 char (1 byte), which is the id of the player that disconnected.</p>
<p><a class="el" href="structNetwork_1_1data_1_1ConnectData.html">Network::data::ConnectData</a></p>
<h3><a class="anchor" id="server_start_sec"></a>
START</h3>
<p>When the game Leader client sends a START packet, the server will send a START packet to all the clients to start the game.</p>
<p>Start packet contains a short of 2 bytes, which is the id of the game map.</p>
<p><a class="el" href="structNetwork_1_1data_1_1StartData.html">Network::data::StartData</a></p>
<h3><a class="anchor" id="client_dead_sec"></a>
DEAD</h3>
<p>When a player dies, the server sends a DEAD packet to the clients. The packet contains a char (1 byte), which is the id of the player that died.</p>
<h3><a class="anchor" id="server_join_sec"></a>
JOIN</h3>
<p>When a client wants to join a game, it sends a JOIN packet to the server. The packet contains a NAME_LENGTH char (1 byte) array, which is the name of the player that joins. NAME_LENGTH is defined <a class="el" href="JoinData_8hpp.html">JoinData.hpp</a> (currently set to 7, so 7 bytes).</p>
<p><a class="el" href="structNetwork_1_1data_1_1JoinData.html">Network::data::JoinData</a></p>
<h3><a class="anchor" id="server_move_sec"></a>
MOVE</h3>
<p>A client sends a MOVE packet to the server to communicate the position of its player. The packet contains a byte for the id of the player, and two int (4 bytes) corresponding to the X and Y position</p>
<p><a class="el" href="structNetwork_1_1data_1_1MoveData.html">Network::data::MoveData</a></p>
<h3><a class="anchor" id="server_sht_sec"></a>
SHOOT</h3>
<p>When a player shoots, the client sends a SHOOT packet to the server. The server then sends a SHOOT packet to all the clients. The packet contains a char (1 byte), which is the id of the shooting player.</p>
<h3><a class="anchor" id="server_hit_sec"></a>
HIT</h3>
<p>When a player is hit or hits a monster, the server sends a HIT packet to all the clients. The packet contains a NAME_LENGTH char (1 byte) array, which is the name of the concerned player, or monster.</p>
<h3><a class="anchor" id="server_score_sec"></a>
SCORE</h3>
<p>When the score changes, the server sends a SCORE packet to all the clients. The packet contains an int (4 bytes), which is the new score for everyone.</p>
<h3><a class="anchor" id="server_espwn_sec"></a>
ENEMY_SPAWN</h3>
<p>When an enemy spawns, the server sends an ENEMY_SPAWN packet to all the clients. The packet contains a char (1 byte), which is the id of the enemy that spawned, and two int (4 bytes) corresponding to the X and Y position of the enemy.</p>
<h3><a class="anchor" id="server_eded_sec"></a>
ENEMY_DEAD</h3>
<p>When an enemy is dead, the server sends an ENEMY_DEAD packet to all the clients. The packet contains a char (1 byte), which is the id of the enemy that died.</p>
<h3><a class="anchor" id="server_emve_sec"></a>
ENEMY_MOVE</h3>
<p>the server sends a MOVE packet to clients to communicate the position of an enemy. The packet contains a byte for the id of the enemy, and two int (4 bytes) corresponding to the X and Y position</p>
<p><a class="el" href="structNetwork_1_1data_1_1MoveData.html">Network::data::MoveData</a></p>
<p>@subsubesction server_esht_sec ENEMY_SHOOT</p>
<p>When an enemy shoots, the server sends an ENEMY_SHOOT packet to all the clients. The packet contains a char (1 byte), which is the id of the enemy that shot.</p>
<h3><a class="anchor" id="server_elife_sec"></a>
ENEMY_LIFE</h3>
<p>When an enemy's life changes, the server sends an ENEMY_LIFE packet to all the clients. The packet contains a char (1 byte), which is the id of the enemy that changed life, and an int (4 bytes) corresponding to the new life of the enemy.</p>
<h3><a class="anchor" id="server_map_sec"></a>
MAP</h3>
<p>When a map object is created or modified, the server sends a MAP packet to all the clients. The packet contains a char (1 byte), which is the id of the map object, and two int (4 bytes) corresponding to the X and Y position of the map object.</p>
<h3><a class="anchor" id="server_end_sec"></a>
END</h3>
<p>When the game ends, the server sends an END packet to all the clients. It does not contain any data.</p>
<h3><a class="anchor" id="server_leader_sec"></a>
LEADER</h3>
<p>The server sends a LEADER packet to all the clients at client connexion, or when the leader of the game changes. The packet contains a char (1 byte), which is the id of the leader.</p>
<p><a class="el" href="structNetwork_1_1data_1_1LeaderData.html">Network::data::LeaderData</a></p>
<h2><a class="anchor" id="client_rfc_sec"></a>
Client packets</h2>
<h3><a class="anchor" id="client_connect_sec"></a>
CONNECT</h3>
<p>-&gt; See the <a class="el" href="rfc_page.html#server_connect_sec">CONNECT</a> packet.</p>
<h3><a class="anchor" id="client_start_sec"></a>
START</h3>
<p>-&gt; See the <a class="el" href="rfc_page.html#server_start_sec">START</a> packet.</p>
<h3><a class="anchor" id="client_move_sec"></a>
MOVE</h3>
<p>-&gt; See the <a class="el" href="rfc_page.html#server_move_sec">MOVE</a> packet.</p>
<h3><a class="anchor" id="client_sht_sec"></a>
SHOOT</h3>
<p>-&gt; See the <a class="el" href="rfc_page.html#server_sht_sec">SHOOT</a> packet.</p>
<h3><a class="anchor" id="client_quit_sec"></a>
QUIT</h3>
<p>When a client wants to quit a game, it sends a QUIT packet to the server. The server then sends a <a class="el" href="rfc_page.html#server_disconnect_sec">DISCONNECT</a> packet to all the clients. It does not contain any data.</p>
<h2><a class="anchor" id="diag_ex"></a>
Example of a connexion between a client and a server</h2>
<div class="image">
<img src="sequence_diag.png" alt=""/>
<div class="caption">
Sequence diagram of a connexion between a client and a server</div></div>
<h3><a class="anchor" id="autotoc_md3"></a>
Explanations:</h3>
<ul>
<li>The client sends a CONNECT packet to the server.</li>
<li>The server sends a CONNECT packet to all the clients (Only one at the moment).</li>
<li>The server sends a LEADER packet to all the clients (Only one at the moment).</li>
<li>The new client sends a CONNECT packet to the server.</li>
<li>The server sends a CONNECT packet to all the clients.</li>
<li>The leader client sends a START packet to the server.</li>
<li>The server sends a START packet to all the clients.</li>
<li>The leader client sends a QUIT packet to the server.</li>
<li>The server sends a DISCONNECT packet to all the clients.</li>
<li>The server sends a LEADER packet to the only remaining client.</li>
<li>The client sends a START packet to the server.</li>
<li>The server sends a START packet to all the clients (Only one at the moment). </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
